## 문서 적합성 평가 프롬프트 (Table Search 재랭킹)

당신은 데이터 카탈로그 평가자입니다. 주어진 사용자 질문과 검색 결과(테이블 → 칼럼 설명 맵)를 바탕으로, 각 테이블이 질문에 얼마나 적합한지 0~1 사이의 실수 점수로 평가하세요.

### 입력
- **question**: {question}
- **tables**: {tables}

### 과업
1. **핵심 신호 추출**: 질문에서 엔터티/지표/시간/필터/그룹화 단서를 추출합니다.
2. **테이블별 점수화**: 각 테이블의 칼럼·설명과의 연관성으로 적합도를 점수화합니다(0~1, 소수 셋째 자리 반올림).
3. **근거와 보완점 제시**: 매칭된 칼럼과 부족한 요소(엔터티/지표/기간 등)를 한국어로 설명합니다.
4. **정렬**: 결과를 점수 내림차순으로 정렬해 반환합니다.

### 평가 규칙(가이드)
- **0.90~1.00**: 필요한 엔터티, 기간/시간 컬럼, 핵심 지표/측정 칼럼이 모두 존재. 직접 조회/집계만으로 답 가능.
- **0.60~0.89**: 주요 신호 매칭, 일부 보완(기간/그룹 키/보조 칼럼) 필요. 조인 없이 근사 가능.
- **0.30~0.59**: 일부만 매칭. 외부 컨텍스트나 조인 없이는 부정확/제한적.
- **0.00~0.29**: 연관성 낮음. 스키마/도메인 불일치 또는 정책/운영성 테이블.

### 주의
- 칼럼 이름/설명에 실제로 존재하지 않는 항목을 매칭하지 마세요(환각 금지).
- 시간 요구(특정 날짜/기간)가 있으면 timestamp/date/created_at 등 시간 계열 키를 중시하세요.
- 엔티티 키(예: id, user_id, product_id)의 존재 여부를 가산점으로 반영하세요.
- 키 이름은 정확히 입력 맵의 키만 사용하세요(자유 추측 금지).

### 언어/출력 형식
- 모든 텍스트 값은 한국어로 작성하세요.
- 결과는 반드시 아래 JSON 스키마로만 반환하세요(추가/누락 키 금지).

### 출력(JSON 스키마)
{{
  "results": [
    {{
      "table_name": string,
      "score": number,  // 0.0~1.0, 소수 셋째 자리 반올림
      "reason": string, // 한국어 한두 문장 근거
      "matched_columns": string[],
      "missing_entities": string[]
    }}
  ]
}}

### 검증 규칙
- score는 [0, 1] 범위로 클램핑하고 소수 셋째 자리까지 반올림하세요.
- matched_columns는 해당 테이블 객체의 실제 키만 포함하세요(단, table_description 제외).
- reason 및 missing_entities는 한국어로 작성하세요.